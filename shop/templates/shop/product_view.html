{% extends 'base.html' %}
{% load static %}

{% block title%}
  <title>Product View - Rent Station</title>
{% endblock %}
{% block css %}
  <link rel="stylesheet" href="{% static '/css/product_view.css' %}">
  <style>
    .header{
      background: #fff;
      box-shadow:0 5px 6px 0 #ddd;
    }
    .menus ul a{
      color:#000 !important;
    }
    #text2 a{
      color:#000;
    }
  </style>
{% endblock %}



{% block content %}
<div class="row">
  <div class="col-xl-12">
    <div class="view-banner1">
      <div class="container">
        <div class="view-container">
          <div class="col col-md-6">
            <div class="col-12">
              <div class="view-subbanner1">
                <img src="/static/{{product.main_image}}" alt="" class="prod-img">
              </div>
            </div>
            <div class="col-12">
              <div class="view-subbanner2" id="gallery">
                <a href="#" data-image="/static/{{product.main_image}}" data-zoom-image="/static/{{product.main_image}}">
                  <img src="/static/{{product.main_image}}" alt="" id="prod-img1">
                </a>
                <a href="#" data-image="/static/{{product.sub_image1}}" data-zoom-image="/static/{{product.sub_image1}}">
                  <img src="/static/{{product.sub_image1}}" alt="" id="prod-img2">
                </a>
                <a href="#" data-image="/static/{{product.sub_image2}}" data-zoom-image="/static/{{product.sub_image2}}">
                  <img src="/static/{{product.sub_image2}}" alt="" id="prod-img3">
                </a>
              </div>
            </div>
            <div class="col-md-12 d-none d-md-inline">
              <div class="container">
                <div class="product-details">
                  <h6>Product Details</h6>
                  <div class="col col-xl-6 col-lg-6 col-md-6">
                    <div class="prod_detail_contain">
                      <span>
                        {{product.name}}
                      </span>
                      <span>
                        Dress: {{product.dress_type}}
                      </span>
                      {% if product.designer %}
                      <span>
                        Designer: {{product.designer}}
                      </span>
                      {% endif %}
                      {% if product.caste_category %}
                      <span>
                        Caste: {{product.caste_category}}
                      </span>
                      {% endif %}
                    </div>
                  </div>
                  <div class="col col-xl-6 col-lg-6 col-md-6">
                    <div class="prod_detail_contain">
                      <span>
                        Available Size:
                        {% for size in product.size.all %}
                          {{size}}
                        {% endfor %}
                      </span>
                      <span>
                        Color: {{product.dress_color}}
                      </span>
                    </div>
                  </div>
                </div>
                <div class="rating_banner">
                  <h6>Ratings</h6>
                  <div class="col col-lg-5" style="padding:0px;">
                    <div class="rate_details">
                      <span id="rate1">{{rating.average_rates}}</span><span id="rate2">/5</span><br>
                      <span id="rate_stars">
                        <i class="fas fa-star" id="star_avg1"></i>
                        <i class="fas fa-star-half-alt" id="star_avg1half"></i>
                        <i class="fas fa-star" id="star_avg2"></i>
                        <i class="fas fa-star-half-alt" id="star_avg2half"></i>
                        <i class="fas fa-star" id="star_avg3"></i>
                        <i class="fas fa-star-half-alt" id="star_avg3half"></i>
                        <i class="fas fa-star" id="star_avg4"></i>
                        <i class="fas fa-star-half-alt" id="star_avg4half"></i>
                        <i class="fas fa-star" id="star_avg5"></i>
                      </span>
                    </div>
                  </div>
                  <div class="col col-lg-7" style="padding:0px;">
                    <div class="rate_details r_details">
                      <input type="hidden" id="total" value="{{rating_total_count}}">
                      <div id="five_star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <div id="rate_count5">{{rating_five}}</div>
                        <div id="rate_bar">
                          <div class="bar5"></div>
                        </div>

                      </div>
                      <div id="four_star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <div id="rate_count4">{{rating_four}}</div>
                        <div id="rate_bar">
                          <div class="bar4"></div>
                        </div>
                      </div>
                      <div id="three_star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <div id="rate_count3">{{rating_three}}</div>
                        <div id="rate_bar">
                          <div class="bar3"></div>
                        </div>
                      </div>
                      <div id="two_star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <div id="rate_count2">{{rating_two}}</div>
                        <div id="rate_bar">
                          <div class="bar2"></div>
                        </div>
                      </div>
                      <div id="one_star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <div id="rate_count1">{{rating_one}}</div>
                        <div id="rate_bar">
                          <div class="bar1"></div>
                        </div>
                      </div>
                    </div><br><br>
                  </div>
                  
                </div>
              </div>
            </div>
          </div>
          <div class="col col-md-6">
            <div class="view-subbanner3">
              <form method="POST" action="" id="cart_form">
                {% csrf_token %}
              <div class="view1 px-4 py-2">
                <input name="image" type="hidden" value="/static/{{product.main_image}}">
                <input name="user_id" type="hidden" value="{{ user.id }}">
                <input name="product_name" type="hidden" value="{{ product.name }}">
                <input name="caste_type" type="hidden" value="{{ product.caste_category }}">
                <input name="designer" type="hidden" value="{{ product.designer }}">
                <input name="personal_refund" type="hidden" value="{{ product.refund_amount }}">
                <input name="element_type" id="element_type" type="hidden" value="{{ product.dress_type }}">
                <input name="gender" id="gender" type="hidden" value="{{ product.person_category }}">
                <h5>{{product.name}}</h5>
                {% if product.caste_category %}
                <p style="padding-bottom:5px; font-family:PlayfairDisplay-Regular;">{{product.caste_category}} {{product.element_category}}</p>
                {% elif product.designer %}
                <p style="padding-bottom:5px; font-family:PlayfairDisplay-Regular;">{{product.designer}} {{product.dress_type}}</p>
                {% else %}
                <p style="padding-bottom:5px; font-family:PlayfairDisplay-Regular;">{{product.dress_type}}</p>
                {% endif %}
                <span style="font-family:Raleway-Regular; font-size:22px; color:#ff8000;">Rs</span>
                <span style="" id="rent-price1">{{product.rent_price}}</span>
<!--                <span style="" id="rent-price2">{{product.event_rent_price}}</span> <span style="" id="text-hidden">(for 5 rentals)</span>-->
<!--                <span style="" id="rent-price3">{{product.unlimited_rent_price}}</span>-->
              </div>
              <hr style="float:left; width:100%; margin-top:0px;">
              <div class="view1 px-4 py-2">
                <h6>Choose a Way to Rent</h6>
                <div class="checkboxes">
                  <p style="font-family:Poppins-Regular" id="check-text1"><input type="radio" aria-label="Personal Rent" id="check1" name="check1" value="One Time Rental"/>
                    <span id="span1">One Time Rental</span><br>
                    <span id="span2">Rent your look for 4 or 8 days plan</span>
                  </p>
<!--                  <p style="font-family:Poppins-Regular" id="check-text2"><input type="radio" aria-label="Personal Rent" id="check2" name="check2" value="Event Rent"/> Event Rent</p>-->
<!--                  <p style="font-family:Poppins-Regular" id="check-text3"><input type="radio" aria-label="Personal Rent" id="check3" name="check3" value="Unlimited Rent"/> Unlimited Rent</p>-->
                </div>
              </div>
              <div class="col col-md-6" style="padding:0px;">
                <div class="view1 px-4 py-2 normal-size">
                  <p style="padding:10px 0px; font-size:14px;">SIZE</p>
                  <select class="select1" name="select1">
                    {% for size in product.size.all %}
                    <option value="{{size}}">{{size}}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="view1 px-4 py-2">
                <p style="padding:10px 0px; font-size:14px;">QUANTITY</p>
                <span id="quantity-block">
                  <button type="button" name="minus" id="minus-btn">-</button>
                  <input type="number" value="" name="quantity" id="qty-input" readonly/>
                  <button type="button" name="plus" id="plus-btn" class="plus-btn">+</button>
                  <span style="" id="item-rent-msg1">Rent up to max 2 items</span><br>
<!--                  <span style="" id="item-rent-msg2">Rent up to min 5 & max 15 items</span><br>-->
                  <span style="margin:0px; padding:10px 0px; font-size:14px;">You will pay <span style="color:#ff8000; font-size:16px;">NPR</span> <span style="color:#ff8000; font-size:16px;" id="qty-price"></span></span><br>
                </span>
                <input type="hidden" id="stock-s" value="{{product.stock_size_s}}">
                <input type="hidden" id="stock-m" value="{{product.stock_size_m}}">
                <input type="hidden" id="stock-l" value="{{product.stock_size_l}}">
                <input type="hidden" id="stock-xl" value="{{product.stock_size_xl}}">
                <input type="hidden" id="stock-xxl" value="{{product.stock_size_xxl}}">
                <input type="hidden" id="stock-3xl" value="{{product.stock_size_3xl}}">
<!--                <input type="hidden" id="stock-accessory" value="{{product.stock_ornament}}">-->
                <span style="" id="stock-text">Items in stock: <input style="" type="text" id="stock" value="0" readonly></span>
                <span style="" id="outstock-text">Out of stock</span>
              </div>
              <div class="view1 px-4 py-2">
                <p style="padding:0px 0px 15px 0px; font-size:14px;">DELIVERY + RETURN DATES</p>
                <div id="days">
                  <div id="days-cover"></div>
                  <p style="font-family:Poppins-Regular; font-size:14px;" id="rent-check1"><input type="radio" id="rental-check1" name="rent-check1" value="4 days rental"/> <span>4-DAYS RENTAL</span></p>
                  <p style="font-family:Poppins-Regular; font-size:14px;" id="rent-check2"><input type="radio" id="rental-check2" name="rent-check2" value="8 days rental"/> <span>8-DAYS RENTAL</span></p>
<!--                  <p style="font-family:Poppins-Regular; font-size:14px;" id="rent-check3"><input type="radio" id="rental-check3" name="rent-check3" value="1 month rental"/> <span>1 MONTH RENTAL</span></p>-->
                </div>
              </div>
              <div class="col col-lg-6" style="">
                <div class="view1 px-2 py-2">
                  <div id="calender">
                    <div id="calender-cover"></div>
                  </div>
                  <p id="date-desc" style="">Select Your Delivery date</p>
                  <p id="date-desc">Note: Select 1 or 2 days before your event</p>
                  <span style="color:red; font-size:13px; margin-top:6px; display:none;" id="date_error">Invalid Date! It cannot be today's and tomorrow's date</span>
                </div>
              </div>
              <div class="col col-lg-6" style="">
                <div class="view1 px-2 py-2">
                  <span id="dates">
                    <label for="delivery-date">Delivery Date:</label>
                    <input type="text" id="delivery" name="delivery_date" value="" readonly/>
                    <label for="returning-date">Returning Date:</label>
                    <input type="text" class="return" name="return_date" value="" readonly/>
                  </span>
                </div>
              </div>
              <div class="view1 px-4 py-4" style="background:;">
                <span id="cart_error">Please select appropriate delivery date to continue!</span>
                <button type="submit" name="addcart" id="cart-btn"><i class="fas fa-shopping-bag fa-sm"></i>ADD TO CART</button>
                <button type="submit" name="wishcart" id="wish-btn"><i class="fas fa-heart fa-sm"></i>ADD TO WISHLIST</button>
                <i class="fa fa-spinner fa-pulse spinner"></i>
                <br><br><br>
                <span class="message"></span>
              </div>
              </form>
              
              <div class="col-12 d-md-none">
                <div class="product-details">
                  <h6>Product Details</h6>
                  <div class="col col-xl-6 col-lg-6 col-md-6">
                    <div class="prod_detail_contain">
                      <span>
                        {{product.name}}
                      </span>
                      <span>
                        Dress: {{product.dress_type}}
                      </span>
                      {% if product.designer %}
                      <span>
                        Designer: {{product.designer}}
                      </span>
                      {% endif %}
                      {% if product.caste_category %}
                      <span>
                        Caste: {{product.caste_category}}
                      </span>
                      {% endif %}
                    </div>
                  </div>
                  <div class="col col-xl-6 col-lg-6 col-md-6">
                    <div class="prod_detail_contain">
                      <span>
                        Available Size:
                        {% for size in product.size.all %}
                          {{size}}
                        {% endfor %}
                      </span>
                      <span>
                        Color: {{product.dress_color}}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <div class="recommend_product_banner">
      <div class="container">
        <div class="recommend_products">
          <h5>Just for You</h5>
          {% for product, range, nSlides in prod_list %}
          {% if product %}
          <div id="productCarousel{{forloop.counter}}" class="carousel slide" data-ride="carousel">

              <div class="carousel-inner">
                <div class="carousel-item active">
                  {% for prod in product %}
                <div class="col col-xl-3 col-lg-3 col-md-4 col-6">
                    <a href="{{prod.get_absolute_url}}">
                      <div class="card product-recommend-card">
                        <div class="col col-12" style="padding:0px">
                          <div class="card-images">
                            <img src="/static/{{prod.main_image}}" class="card-recommend-img1" alt="...">
                          </div>
                        </div>
                        <div class="col col-12" style="padding:0px">
                          <div class="card-body">
                            <p class="product-recommend-name">{{prod.name}}</p>
                            {% if prod.caste_category %}
                            <p class="product-recommend-cat">{{prod.caste_category}} {{prod.element_category}}</p>
                            {% elif prod.designer %}
                            <p class="product-recommend-cat">{{prod.designer}} {{prod.dress_type}}</p>
                            {% else %}
                            <p class="product-recommend-cat">{{prod.dress_type}}</p>
                            {% endif %}
                            <p class="product-recommend-price">Rs {{prod.rent_price}}</p>
                          </div>
                        </div>
                      </div>
                    </a>
                  </div>
                {% if forloop.counter|divisibleby:4 and forloop.counter > 0 and not forloop.last %}
                </div>
                <div class="carousel-item">
                  {% endif %}
                  {% endfor %}
              </div>
              </div>

<!--            <a class="carousel-control-prev" href="#productCarousel{{forloop.counter}}" role="button" data-slide="prev">-->
<!--              <span class="carousel-control-prev-icon" aria-hidden="true"></span>-->
<!--              <span class="sr-only">Previous</span>-->
<!--            </a>-->
<!--            <a class="carousel-control-next" href="#productCarousel{{forloop.counter}}" role="button" data-slide="next">-->
<!--              <span class="carousel-control-next-icon" aria-hidden="true"></span>-->
<!--              <span class="sr-only">Next</span>-->
<!--            </a>-->
          </div>
          {% else %}
          <span class="no_recommend_prod">
            <h6>No more products to show in this category</h6>
          </span>
          {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <div class="review-banner">
      <div class="container">
        <div class="reviews">
          <span class="review_head">
            <h5>Reviews</h5>
            <span>
              {{r_n}} reviews
            </span>
          </span>
          <hr style="float:left; width:100%;">
          {% for reviews, range in review_set %}
          {% if reviews %}
          {% for r in reviews %}
          <div class="review_list">
            <span class="sub_review1">
              <span class="sub_sub_review1">
                <img src="{% static 'img/icon_img/user_icon.png' %}" class="review_img">
              </span>
              <span class="sub_sub_review2">
                {{r.user_name}}
              </span>
              <span class="sub_sub_review3">
                <i class="fa fa-check-circle mx-2"></i>Verified User
              </span>
            </span>
            <span class="sub_review2">
              {{r.review}}
            </span>
            <span class="sub_review3">
              {{r.posted_date}}
            </span>
          </div>
          {% endfor %}
          <span id="page_numbers">
          {% if reviews.has_other_pages %}
            <ul class="pagination">
              {% if reviews.has_previous %}
                <li><a href="?page={{ reviews.previous_page_number }}">&laquo;</a></li>
              {% else %}
                <li class="prev_disabled">&laquo;</li>
              {% endif %}
              {% for i in reviews.paginator.page_range %}
                {% if reviews.number == i %}
                  <li class="">{{ i }}</li>
                {% else %}
                  <li><a href="?page={{ i }}">{{ i }}</a></li>
                {% endif %}
              {% endfor %}
              {% if reviews.has_next %}
                <li><a href="?page={{ reviews.next_page_number }}">&raquo;</a></li>
              {% else %}
                <li class="next_disabled">&raquo;</li>
              {% endif %}
            </ul>
          {% endif %}
          </span>
          {% else %}
          <div class="no_reviews">
            No reviews found
          </div>
          {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xl-12">
    <div class="question-banner">
      <div class="container">
        <div class="questions">
          <div class="question-head">
            <h5>Questions about this product</h5>
          </div>
          <div class="query-content">
            {% if request.user.is_authenticated %}
            <form method="POST" action="" id="questionForm">
              {% csrf_token %}
              <div class="input-group">
                <input type="hidden" name="user_name" value="{{request.user.username}}" >
                <input type="hidden" name="product_name" value="{{product.name}}">
                <input type="text" name="question_input" class="form-control" placeholder="Enter your question(s) here"
                       id="question">
                <div class="input-group-append">
                  <button type="submit" name="submit" id="question-btn">Ask Question</button>
                </div>
              </div>
            </form>
            {% else %}
            <p id="login_text">Please <a id="question_log_pop">Log In</a> to ask questions</p>
            {% endif %}
            <span class="question_msg"></span>
            <hr>
            <span id="queries">
              {% include 'shop/question.html' %}
            </span>


          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!--login-popup-banner===========================-->

<div class="row" style="position:relative;">
  <div class="col-12">
    <div class="login_popup_banner">
      <div class="container my-4">
        <div class="col col-xl-4 col-lg-3 col-md-2 d-none d-md-inline"></div>
        <div class="col col-xl-4 col-lg-6 col-md-8 col-sm-12 col-12">
          <div class="login-form login-popup">
            <i id="popup_close" class="far fa-times-circle"></i>
            <form class="" action="/shop/account/login/" method="post" id="login-user-form">
              <h4>Log In</h4>
              <hr>
              <div id="error-info">

              </div>
              {% csrf_token %}
                <label for="email" class="label"><span>Email Address</span></label>
                <input type="email" class="form-control" id="email" name='email' placeholder="Email"> <br>
              <label for="password" class="label"><span>Password</span></label>
                <input type="password" class="form-control" id="password" name='password' placeholder="Password"><br>
                <input name="next" type="hidden" value="{{request.path}}">
              <button type="submit" name="login" id="login-user-btn">Log In</button>
            </form>
            <a href="{% url 'reset_password' %}">Forget Password?</a><br>
            <span>Dont have an account?  <a href="/shop/account/register/">Create Here</a></span>
          </div>
        </div>
        <div class="col col-xl-4 col-lg-3 col-md-2 d-none d-md-inline"></div>
      </div>
    </div>
  </div>
</div>

<!--=====================================================-->

<!-- <div class="container my-4">
    <div class="row">
    <div class="col-md-4">
    <div class="row">
        <img src="/static/{{product.image_url}}" width="233px" height="385px">
    </div>
        <div class="row">
            <button class="btn btn-primary mx-3">Buy Now</button>
            <button class="btn btn-primary">Add To Cart</button>
        </div>

    </div>

    <div class="col-md-8">
        <h5>{{product.name}}</h5>
        <p><b>Rs.{{product.rent_price}} </b></p>
        <p>{{product.desc}}</p>


    </div>
    </div>


</div> -->

{% endblock %}


{% block js %}

<script src="{% static '/js/product.js' %}"></script>

<script>
$('#cart-btn').on('click', function(event) {
  $('.spinner').css({"display": "block"});

  var user_auth = $('input[name=user_id]').val();

  if(user_auth != 'None'){
    if(error == 0){

      $('.message').empty();
      var success = 0;



        $('#cart_error').css({"display": "none"});
              var rent_way;
              var dress_size;
              var dress_backup_size;
              var rent_days;
              var qty_prod = $('input[name=quantity]').val();
              var designer = $('input[name=designer]').val();
              var caste_type;
              dress_size = $('.select1 option:selected').val();
              if($('#check1').is(':checked')){
                rent_way = $('input[name=check1]').val();
                refund = $('input[name=personal_refund]').val();
                refund = refund * qty_prod;
              }
              if($('#rental-check1').is(':checked')){
                rent_days = $('input[name=rent-check1]').val();
              }
              if($('#rental-check2').is(':checked')){
                rent_days = $('input[name=rent-check2]').val();
              }
              if(element == 'tradition'){
                caste_type = $('input[name=caste_type]').val();
              }else{
                caste_type = 'none'
              }
              if(designer != 'None'){
                designer = $('input[name=designer]').val();
              }else{
                designer = 'none'
              }

              var formData = {
                  'product_name': $('input[name=product_name]').val(),
                  'caste_type': caste_type,
                  'designer': designer,
                  'element_type': $('input[name=element_type]').val(),
                  'gender': $('input[name=gender]').val(),
                  'renting_way': rent_way,
                  'product_size': dress_size,
                  'quantity': $('input[name=quantity]').val(),
                  'amount': $('span#qty-price').text(),
                  'refund': refund,
                  'renting_days': rent_days,
                  'delivery_date': $('input[name=delivery_date]').val(),
                  'return_date': $('input[name=return_date]').val(),
                  'image': $('input[name=image]').val(),
                  'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val()
              };
              $.ajax({
                      type: 'POST',
                      url: '/shop/add-to-cart/'+rent_way+'/'+dress_size+'/{{product.id}}/',
                      data: formData,
                      encode: true
                  })
                  .done(function(data) {
                          var qty_added = $('input[name="quantity"]').val();
                          mystr = `<span style="color:green;">` + qty_added + ` item(s) added to cart</span>`
                          $('.message').append(mystr);
                          $('.badge').load("/shop/cart_count/");
                          $('.spinner').css({"display": "none"});
                          var cart_counted = parseInt($('.badge').text());
                          if(cart_counted != 'None'){
                              $('.badge').css({"display": "inline-block"});
                          }else{
                              $('.badge').css({"display": "none"});
                          }


                  });





    }else{
      $('#cart_error').css({"display": "inline-block"});
      $('#date_error').css({"display" : "none"});
      $('.spinner').css({"display": "none"});
    }

  }else{
    $('#error-info').prepend('Please login to continue!');
    $('.login_popup_banner').fadeIn();
    $('.login-popup').css({"opacity": "1", "transform": "scale(1)"});
    $('.spinner').css({"display": "none"});
  }



  event.preventDefault();
});


$('#wish-btn').on('click', function(event) {
  $('.spinner').css({"display": "block"});

  var user_auth = $('input[name=user_id]').val();

  if(user_auth != 'None'){

      $('.message').empty();
              var rent_way;
              var dress_size;
              var dress_backup_size;
              var caste_type;
              var designer = $('input[name=designer]').val();
              dress_size = $('.select1 option:selected').val();
              if(element == 'tradition'){
                caste_type = $('input[name=caste_type]').val();
              }else{
                caste_type = 'none'
              }
              if(designer != 'None'){
                designer = $('input[name=designer]').val();
              }else{
                designer = 'none'
              }

              var formData = {
                  'product_name': $('input[name=product_name]').val(),
                  'caste_type': caste_type,
                  'designer': designer,
                  'element_type': $('input[name=element_type]').val(),
                  'product_size': dress_size,
                  'image': $('input[name=image]').val(),
                  'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val()
              };
              $.ajax({
                      type: 'POST',
                      url: '/shop/add_to_wishlist/{{product.id}}/',
                      data: formData,
                      encode: true
                  })
                  .done(function(data) {
                          mystr = `<span style="color:green;"> Added to Wishlist</span>`
                          $('.message').append(mystr);
                          $('.spinner').css({"display": "none"});

                  });



  }else{
    $('#error-info').prepend('Please login to continue!');
    $('.login_popup_banner').fadeIn();
    $('.login-popup').css({"opacity": "1", "transform": "scale(1)"});
  }



  event.preventDefault();
});

$('#question-btn').on('click', function(event) {
  $('.question_msg').empty();
  var formData = {
        'user_name': $('input[name=user_name]').val(),
        'product_name': $('input[name=product_name]').val(),
        'question': $('input[name=question_input]').val(),
        'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val()
    }
    $.ajax({
            type: 'POST',
            url: '/shop/query/{{product.id}}/',
            data: formData,
            encode: true
        })
        .done(function(data) {

            	mystr = `<p style="color:green; font-size:14px;">Posted!</p>`
            	$('.question_msg').append(mystr);
            	$('#questionForm')[0].reset();
                $('#queries').load("/shop/question/{{product.id}}/");
                $('.answer_area:has(.answer:empty)').remove();

        });
    event.preventDefault();

});



</script>

{% endblock %}


<!--if(user_auth != 'None'){}else{-->
<!--                      $('.login_popup_banner').fadeIn();-->
<!--                      $('.login-popup').css({"opacity": "1", "transform": "scale(1)"});-->
<!--                    }-->
<!-- $(".numbersonly").keyup(function(e) {

  if (this.value.length > 2) {
    $("#errmsg").html("Digits Only").show().fadeOut("slow");
    $(this).val($(this).val().substr(0, this.value.length - 1));
    return false;
  }

}); -->
<!-- $('p#rent-price').each(function(){
  rent = $(this).val($(this).attr('value'));
}); -->

<!-- $(function () {
       $('#searchInput').onkeyup(function () {
           if ($(this).val() == '') {
               $('.enableOnInput').prop('disabled', true);
           } else {
               $('.enableOnInput').prop('disabled', false);
           }
       });
   }); -->



<!--              if($('#check2').is(':checked')){-->
<!--                rent_way = $('input[name=check2]').val();-->
<!--                refund = $('input[name=event_refund]').val();-->
<!--              }-->
<!--              if($('#check3').is(':checked')){-->
<!--                rent_way = $('input[name=check3]').val();-->
<!--                refund = $('input[name=unlimited_refund]').val();-->
<!--              }-->